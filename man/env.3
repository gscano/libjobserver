.TH JOBSERVER 3

.SH NAME

jobserver_getenv, jobserver_setenv, jobserver_unsetenv - access the jobserver environment
variable

.SH SYNOPSIS

.B #include <jobserver.h>

.B int jobserver_getenv(struct jobserver * \fIjs\fP);
.br
.B int jobserver_setenv(struct jobserver const * \fIjs\fP);
.br
.B int jobserver_unsetenv(struct jobserver const * \fIjs\fP);

.SH DESCRIPTION

The
.BR jobserver_getenv (),
.BR jobserver_setenv (),
and
.BR jobserver_unsetenv ()
functions respectively fetch, set and erase a jobserver \fIjs\fP
from the environment. They are a superset of the
.BR jobserver_read_env (3)
and
.BR jobserver_write_env (3)
functions.

The
.BR jobserver_unsetenv()
function, unlike
.BR unsetenv (3),
\fIdoes not remove\fP the environment variable but removes
the jobserver \fIjs\fP indications from it.

The \fIdry_run\fP status of jobserver
\fIjs\fP (see
.BR jobserver (7)),
if present,
is always collected or set even when the jobserver is closed.

.SH RETURN VALUE

On success, these functions return \fB0\fP. On error, \fP-1\fP is returned and
\fIerrno\fP is set accordingly.

.SH ERROR

.SS
.BR jobserver_setenv ()
.SS
.BR jobserver_unsetenv ()
.TP
.B ENOMEM
Not enough memory to change the environment.
.SS
.BR jobserver_getenv ()
.TP
.B EPROTO
Error while parsing the environment.

.SH ENVIRONMENT

.BR MAKEFLAGS
Added or modified but \fInever removed\fP.

.SH ATTRIBUTES

For an explanation of the terms used in this section, see
.BR attributes (7).
.ad l
.TS
allbox;
lb lb lb
l l l.
Interface	Attribute	Value
T{
.BR jobserver_getenv ()
T}	Thread safety	MT-Safe env, locale
T{
.BR jobserver_setenv ()
T}	Thread safety	MT-Unsafe const:env
T{
.BR jobserver_unsetenv ()
T}	Thread safety	MT-Unsafe const:env
.TE
.ad

.SH SEE ALSO

.BR jobserver (7),
.BR jobserver_read_env (3)
.BR jobserver_write_env (3)
.BR getenv (3)
.BR setenv (3)
.BR unsetenv (3)
